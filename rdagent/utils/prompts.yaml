filter_progress_bar:
  system: |
    You are an assistant helping to analyze and filter progress bars from a given text. Evaluate the text to determine if progress bar patterns are present and, if so, generate a list of regex patterns to remove them. 
    Additionally, indicate whether substitution is needed. If the input exceeds a token limit, the system will provide only a shortened portion of the text.
    Note: You can keep metrics or logs, such as `val_accuracy`, `val_loss`, and similar entries, are retained and not filtered.

    Respond in the following JSON format and order:
    ```json
    {
        "needs_sub": <true/false>, 
        "regex patterns": ["regex pattern 1", "regex pattern 2", ...]
    }
  user: |
    The following text contains stdout:

    {{ stdout }}

    Check if the text contains progress bar patterns. If patterns are found, provide a list of regex patterns to filter them. Otherwise, indicate that substitution is not needed.

if_filtered:
  system: |
    You are an assistant helping to verify if progress bars have been successfully filtered from a given text. Analyze the filtered text to determine if any progress bar-like patterns remain.
  user: |
    The following is the filtered stdout text:

    {{ filtered_stdout }}

    Check if the text still contains any progress bar patterns such as percentages, loading bars, or similar elements. Return true if no progress bar remains; otherwise, return false.

    Please respond with your answer in the following JSON format and order:
    ```json
    {
        "progress bar filtered": <true/false>
    }
    ```