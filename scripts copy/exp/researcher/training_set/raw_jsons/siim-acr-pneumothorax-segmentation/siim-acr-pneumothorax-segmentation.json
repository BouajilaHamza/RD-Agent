{"Description": "<p>Imagine suddenly gasping for air, helplessly breathless for no apparent reason. Could it be a collapsed lung? In the future, your entry in this competition could predict the answer.</p>\n<p>Pneumothorax can be caused by a blunt chest injury, damage from underlying lung disease, or most horrifying\u2014it may occur for no obvious reason at all. On some occasions, a collapsed lung can be a life-threatening event.</p>\n<p>Pneumothorax is usually diagnosed by a radiologist on a chest x-ray, and can sometimes be very difficult to confirm. An accurate AI algorithm to detect pneumothorax would be useful in a lot of clinical scenarios. AI could be used to triage chest radiographs for priority interpretation, or to provide a more confident diagnosis for non-radiologists.</p>\n<p>The <a rel=\"noreferrer nofollow\" aria-label=\"Society for Imaging Informatics in Medicine (SIIM) (opens in a new tab)\" target=\"_blank\" href=\"https://siim.org/\">Society for Imaging Informatics in Medicine (SIIM)</a> is the leading healthcare organization for those interested in the current and future use of informatics in medical imaging. Their mission is to advance medical imaging informatics across the enterprise through education, research, and innovation in a multi-disciplinary community. Today, they need your help.</p>\n<p>In this competition, you\u2019ll develop a model to classify (and if present, segment) pneumothorax from a set of chest radiographic images. If successful, you could aid in the early recognition of pneumothoraces and save lives. </p>\n<p>If you\u2019re up for the challenge, take a deep breath, and get started now.</p>\n<p><strong>Note:</strong> As specified on the Data Page, the dataset must be retrieved from Cloud Healthcare. Review <a aria-label=\"this tutorial (opens in a new tab)\" target=\"_blank\" href=\"https://www.kaggle.com/c/siim-acr-pneumothorax-segmentation/overview/siim-cloud-healthcare-api-tutorial\">this tutorial</a> (or <a rel=\"noreferrer nofollow\" aria-label=\"in pdf format (opens in a new tab)\" target=\"_blank\" href=\"https://storage.googleapis.com/kaggle-media/competitions/siim/SIIM%20Cloud%20Healthcare%20API%20Documentation.pdf\">in pdf format</a>) for instructions on how to do so.</p>\n<h3>Acknowledgments</h3>\n<p><strong>SIIM Machine Learning Committee Co-Chairs, Steven G. Langer, PhD, CIIP and George Shih, MD, MS</strong> for tirelessly leading this effort and making the challenge possible in such a short period of time.</p>\n<hr>\n<p><strong>SIIM Machine Learning Committee Members</strong> for their dedication in annotating the dataset, helping to define the most useful metrics and running tests to prepare the challenge for launch.</p>\n<hr>\n<p><strong>SIIM Hackathon Committee</strong>, especially Mohannad Hussain, for their crucial technical support with data conversion.</p>\n<hr>\n<p><img alt=\"ACR Logo\" src=\"https://storage.googleapis.com/kaggle-media/competitions/siim/ACR%20logo.jpg\"> </p>\n<p><strong>American College of Radiology (ACR)</strong>, <a aria-label=\"@RadiologyACR (opens in a new tab)\" target=\"_blank\" href=\"https://www.kaggle.com/RadiologyACR\" data-id=\"ba14fd66-0d11-40c8-888c-7dfae8cfbaf8\" data-user-name=\"RadiologyACR\" class=\"user-mention\">@RadiologyACR</a>: For Co-hosting the challenge and Co-sponsoring  the Prizes</p>\n<hr>\n<p><img alt=\"STR Logo\" src=\"https://storage.googleapis.com/kaggle-media/competitions/siim/STR%20logo.jpg\"> </p>\n<p><strong>Society of Thoracic Radiology (STR)</strong>, <a aria-label=\"@thoracicrad (opens in a new tab)\" target=\"_blank\" href=\"https://www.kaggle.com/thoracicrad\" data-id=\"00e58c16-ec3e-425c-b403-bd8fe9873f4d\" data-user-name=\"thoracicrad\" class=\"user-mention\">@thoracicrad</a>: For their unparalleled expertise in adjudicating the dataset</p>\n<hr>\n<p><img alt=\"MD.ai Logo\" src=\"https://storage.googleapis.com/kaggle-media/competitions/siim/MDai.jpg\"> </p>\n<p><strong>MD.ai</strong>: For providing the annotation tool and helping with the first layer of annotations</p>", "Evaluation": "<p>This competition is evaluated on the mean <a rel=\"noreferrer nofollow\" href=\"https://en.wikipedia.org/wiki/S%C3%B8rensen%E2%80%93Dice_coefficient\">Dice coefficient</a>. The Dice coefficient can be used to compare the pixel-wise&nbsp;agreement&nbsp;between a predicted segmentation&nbsp;and its corresponding ground truth. The formula is given by:</p>\n<p><span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-1-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mfrac><mrow><mn>2</mn><mo>&amp;#x2217;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>X</mi><mo>&amp;#x2229;</mo><mi>Y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow><mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>X</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mo>+</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>Y</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></mfrac><mo>,</mo></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-1\" style=\"width: 6.806em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 5.388em; height: 0px; font-size: 126%;\"><span style=\"position: absolute; clip: rect(0.626em, 1005.33em, 3.404em, -999.997em); top: -2.265em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-2\"><span class=\"mfrac\" id=\"MathJax-Span-3\"><span style=\"display: inline-block; position: relative; width: 4.878em; height: 0px; margin-right: 0.116em; margin-left: 0.116em;\"><span style=\"position: absolute; clip: rect(3.121em, 1004.65em, 4.425em, -999.997em); top: -4.759em; left: 50%; margin-left: -2.378em;\"><span class=\"mrow\" id=\"MathJax-Span-4\"><span class=\"mn\" id=\"MathJax-Span-5\" style=\"font-family: MathJax_Main;\">2</span><span class=\"mo\" id=\"MathJax-Span-6\" style=\"font-family: MathJax_Main; padding-left: 0.23em;\">\u2217</span><span class=\"texatom\" id=\"MathJax-Span-7\" style=\"padding-left: 0.23em;\"><span class=\"mrow\" id=\"MathJax-Span-8\"><span class=\"mo\" id=\"MathJax-Span-9\" style=\"font-family: MathJax_Main;\">|</span></span></span><span class=\"mi\" id=\"MathJax-Span-10\" style=\"font-family: MathJax_Math-italic;\">X<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-11\" style=\"font-family: MathJax_Main; padding-left: 0.23em;\">\u2229</span><span class=\"mi\" id=\"MathJax-Span-12\" style=\"font-family: MathJax_Math-italic; padding-left: 0.23em;\">Y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.173em;\"></span></span><span class=\"texatom\" id=\"MathJax-Span-13\"><span class=\"mrow\" id=\"MathJax-Span-14\"><span class=\"mo\" id=\"MathJax-Span-15\" style=\"font-family: MathJax_Main;\">|</span></span></span></span><span style=\"display: inline-block; width: 0px; height: 4.028em;\"></span></span><span style=\"position: absolute; clip: rect(3.121em, 1003.86em, 4.425em, -999.997em); top: -3.285em; left: 50%; margin-left: -1.981em;\"><span class=\"mrow\" id=\"MathJax-Span-16\"><span class=\"texatom\" id=\"MathJax-Span-17\"><span class=\"mrow\" id=\"MathJax-Span-18\"><span class=\"mo\" id=\"MathJax-Span-19\" style=\"font-family: MathJax_Main;\">|</span></span></span><span class=\"mi\" id=\"MathJax-Span-20\" style=\"font-family: MathJax_Math-italic;\">X<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"texatom\" id=\"MathJax-Span-21\"><span class=\"mrow\" id=\"MathJax-Span-22\"><span class=\"mo\" id=\"MathJax-Span-23\" style=\"font-family: MathJax_Main;\">|</span></span></span><span class=\"mo\" id=\"MathJax-Span-24\" style=\"font-family: MathJax_Main; padding-left: 0.23em;\">+</span><span class=\"texatom\" id=\"MathJax-Span-25\" style=\"padding-left: 0.23em;\"><span class=\"mrow\" id=\"MathJax-Span-26\"><span class=\"mo\" id=\"MathJax-Span-27\" style=\"font-family: MathJax_Main;\">|</span></span></span><span class=\"mi\" id=\"MathJax-Span-28\" style=\"font-family: MathJax_Math-italic;\">Y<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.173em;\"></span></span><span class=\"texatom\" id=\"MathJax-Span-29\"><span class=\"mrow\" id=\"MathJax-Span-30\"><span class=\"mo\" id=\"MathJax-Span-31\" style=\"font-family: MathJax_Main;\">|</span></span></span></span><span style=\"display: inline-block; width: 0px; height: 4.028em;\"></span></span><span style=\"position: absolute; clip: rect(0.853em, 1004.88em, 1.25em, -999.997em); top: -1.301em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 4.878em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.08em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-32\" style=\"font-family: MathJax_Main;\">,</span></span><span style=\"display: inline-block; width: 0px; height: 2.27em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -1.282em; border-left: 0px solid; width: 0px; height: 3.218em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mfrac><mrow><mn>2</mn><mo>\u2217</mo><mrow class=\"MJX-TeXAtom-ORD\"><mo stretchy=\"false\">|</mo></mrow><mi>X</mi><mo>\u2229</mo><mi>Y</mi><mrow class=\"MJX-TeXAtom-ORD\"><mo stretchy=\"false\">|</mo></mrow></mrow><mrow><mrow class=\"MJX-TeXAtom-ORD\"><mo stretchy=\"false\">|</mo></mrow><mi>X</mi><mrow class=\"MJX-TeXAtom-ORD\"><mo stretchy=\"false\">|</mo></mrow><mo>+</mo><mrow class=\"MJX-TeXAtom-ORD\"><mo stretchy=\"false\">|</mo></mrow><mi>Y</mi><mrow class=\"MJX-TeXAtom-ORD\"><mo stretchy=\"false\">|</mo></mrow></mrow></mfrac><mo>,</mo></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-1\">\u00a0\\frac{2 * |X \\cap Y|}{|X| + |Y|},</script></p>\n<p>where X is the predicted set of pixels and Y is the ground truth. The Dice coefficient is defined to be 1 when both X and Y are empty. The leaderboard score is the mean of the Dice coefficients for each image in the test set.</p>\n<h2>Submission File</h2>\n<p><strong>In order to reduce the submission file size, our metric uses run-length encoding on the pixel values.</strong>&nbsp; Instead of submitting an exhaustive list of indices for your&nbsp;segmentation, you&nbsp;will submit pairs of values that contain a start position and a run length. E.g. '1 3' implies starting at pixel 1 and&nbsp;running a total of 3 pixels (1,2,3).</p>\n<p>The competition format requires&nbsp;a space delimited list of pairs. Note that this competition uses relative pixel positions, meaning that after the first pixel position, the remaining pixel values are simply offsets. For example, '1 3 10 5' implies pixels 1,2,3 are to be included in the mask, as well as 14,15,16,17,18. The metric checks that the pairs are sorted, positive, and the decoded&nbsp;pixel values are not duplicated. The pixels are numbered from top to bottom, then left to right: 1 is pixel (1,1), 2 is pixel (2,1), etc.</p>\n<p>The file should contain a header and have the following format:</p>\n<pre>ImageId,EncodedPixels<br>0004d4463b50_01,1 1 5 1<br>0004d4463b50_02,1 1<br>0004d4463b50_03,1 1<br>etc.</pre>\n<p>Submission files may take several minutes to process due to the size.</p>", "Timeline": "<ul>\n<li><p><strong>August 21, 2019</strong> - Entry deadline. You must accept the competition rules before this date in order to compete.</p></li>\n<li><p><strong>August 21, 2019</strong> - Team Merger deadline. This is the last day participants may join or merge teams.</p></li>\n<li><p><strong>August 28, 2019</strong> - Stage 1 ends &amp; Model upload deadline.</p>\n<ul>\n<li><p>In order to be eligible for Stage 2, each team's Stage 1 submission must include the model uploaded, via Team -&gt; Your Model, per the <a aria-label=\"Competition Rules (opens in a new tab)\" target=\"_blank\" href=\"https://www.kaggle.com/c/siim-acr-pneumothorax-segmentation/rules\">Competition Rules</a>. This model should match your final submission selected for scoring in Stage 2. The deadline for model upload is firmly the end of Stage 1.</p></li>\n<li><p>This requirement is in place for the host team to verify the performance of the uploaded models matches the Stage 2 submission file. Compliance with the above will be verified by the host team. Submitters who fail to upload their model by the Stage 1 deadline, or are found not to be in compliance, may be disqualified from Stage 2 and removed from the final leaderboard.</p></li></ul></li>\n<li><p><strong>August 29, 2019</strong> - Stage 2 begins. New test set uploaded.</p></li>\n<li><p><strong>September 4, 2019</strong> - Stage 2 ends &amp; Final submission deadline.</p></li>\n<li><p><strong>September 13, 2019</strong> - Solutions &amp; Other Winners Obligations due from winners. Review <a aria-label=\"Prizes page (opens in a new tab)\" target=\"_blank\" href=\"https://www.kaggle.com/c/siim-acr-pneumothorax-segmentation/overview/prizes\">Prizes page</a> for details on special winners obligations for this competition.</p></li>\n<li><p><strong>September 22-23, 2019</strong> - SIIM CMIMI Conference 2019 in Austin, TX</p></li>\n</ul>\n<p>All deadlines are at 11:59 PM UTC on the corresponding day unless otherwise noted. The competition organizers reserve the right to update the contest timeline if they deem it necessary.</p>", "Prizes": "<ul>\n<li>1st Place - $12,000</li>\n<li>2nd Place - $7,000</li>\n<li>3rd Place - $4,000</li>\n<li>4th - 10th Place - $1,000 each</li>\n</ul>\n<p>Because this competition is being hosted in coordination with the Annual Conference on Machine Intelligence in Medical Imaging (C-MIMI), one representative from each winning team will be invited and strongly encouraged to attend the conference with waived registration fees, contingent on review of solution and fulfillment of winners' obligations.</p>\n<p>Note that in addition to the standard Kaggle Winners' Obligations (open-source licensing requirements, solution packaging/delivery, presentation to host), the host team also asks that you: </p>\n<p>(i) create a short video (not to exceed 5 minutes), </p>\n<p>(ii) publish a link to your open sourced code on the competition forum, and </p>\n<p>(iii) (strongly suggested) make some version of your model publicly available for more hands-on testing purposes only.  As an example of a hosted algorithm, please see <a rel=\"noreferrer nofollow\" aria-label=\"http://demos.md.ai/#/bone-age (opens in a new tab)\" target=\"_blank\" href=\"http://demos.md.ai/#/bone-age\">http://demos.md.ai/#/bone-age</a>.</p>", "SIIM CMIMI Conference": "<p><img alt=\"SIIM CMIMI Conference Banner\" src=\"https://storage.googleapis.com/kaggle-media/competitions/siim/CMIMI%20Banner.png\"></p>\n<p>The Annual Conference on Machine Intelligence in Medical Imaging (C-MIMI) has become a can't-miss event that helps you get up to speed on what's happening in imaging AI, and provides access to researchers, practitioners, and industry.</p>\n<p>Join Us Where Innovation Happens and</p>\n<ul>\n<li><p>Deep dive into one of the hottest areas in medical imaging</p></li>\n<li><p>Play a role in advancing machine learning-based applications into the real world</p></li>\n<li><p>Get access to the latest cutting-edge research &amp; tools, regulatory updates and best practice real life implementations</p></li>\n</ul>\n<p>Meet us in Austin to find out who are the Top 10 Winners of the SIIM-ACR Pneumothorax Challenge!</p>\n<p>Learn More: <a rel=\"noreferrer nofollow\" aria-label=\"https://siim.org/page/2019cmimi (opens in a new tab)\" target=\"_blank\" href=\"https://siim.org/page/2019cmimi\">https://siim.org/page/2019cmimi</a> </p>", "Resources": "<ul>\n<li>Tutorials:<ul>\n<li><strong>Retrieving the dataset from the Google Cloud Healthcare API</strong> is described in <a aria-label=\"this tutorial page (opens in a new tab)\" target=\"_blank\" href=\"https://www.kaggle.com/c/siim-acr-pneumothorax-segmentation/overview/siim-cloud-healthcare-api-tutorial\">this tutorial page</a> or in <a rel=\"noreferrer nofollow\" aria-label=\".pdf format here (opens in a new tab)\" target=\"_blank\" href=\"https://storage.googleapis.com/kaggle-media/competitions/siim/SIIM%20Cloud%20Healthcare%20API%20Documentation.pdf\">.pdf format here</a>.</li>\n<li><strong>A DICOM to JPEG convertor kernel</strong> can be found in <a aria-label=\"this kernel (opens in a new tab)\" target=\"_blank\" href=\"https://www.kaggle.com/onealbao/dicom-to-jpeg-conversion-kernel\">this kernel</a>, for easily converting the dataset to PNG, JPEG, JPEG2000, or any other more easily viewable image format. Special thanks to Shunxing Bao for his contribution.</li>\n<li><strong>A reference model</strong> framework for getting started on this dataset can be reviewed in <a aria-label=\"this starter kernel (opens in a new tab)\" target=\"_blank\" href=\"https://www.kaggle.com/juliaelliott/siim-reference-model\">this starter kernel</a>. Special thanks to Shunxing Bao for his contribution.</li></ul></li>\n<li>We're distributing <strong>$300 Coupons for Google Cloud Platform (GCP) Credit</strong> to teams competing in this competition. Requests can be made by <a aria-label=\"submitting this form (opens in a new tab)\" target=\"_blank\" href=\"https://www.kaggle.com/GCP-Credits-SIIM\">submitting this form</a> before July 15, 2019. Only one request should be made per team.</li>\n</ul>", "SIIM Cloud Healthcare API Tutorial": "<blockquote>\n  <p>UPDATE: This dataset is no longer available via the Cloud Healthcare API. <a aria-label=\"Others have shared the dataset on Kaggle (opens in a new tab)\" target=\"_blank\" href=\"https://www.kaggle.com/seesee/siim-train-test\">Others have shared the dataset on Kaggle</a>, if you're interested in accessing it through those methods.</p>\n</blockquote>\n<p>For your convenience, this tutorial is also provided in <a rel=\"noreferrer nofollow\" aria-label=\".pdf format here. (opens in a new tab)\" target=\"_blank\" href=\"https://storage.googleapis.com/kaggle-media/competitions/siim/SIIM%20Cloud%20Healthcare%20API%20Documentation.pdf\">.pdf format here.</a></p>\n<h1>About this Tutorial</h1>\n<p>This tutorial is necessary to retrieve the dataset for participating in the <a aria-label=\"SIIM-ACR Pnuemothorax Segmentation Competition (opens in a new tab)\" target=\"_blank\" href=\"https://www.kaggle.com/c/siim-acr-pneumothorax-segmentation\">SIIM-ACR Pnuemothorax Segmentation Competition</a> on Kaggle. The dataset is only hosted on Google Cloud Platform (GCP) through the Cloud Healthcare (CHC) API. </p>\n<p>There are methods to retrieve these datasets at no cost to you. And it is also possible to use GCP to do your modeling, with associated pricing structures for those activities, depending on which tools are used. This competition is also issuing GCP Credits for users interested in exploring the latter. Review the competition\u2019s <a aria-label=\"Resources page (opens in a new tab)\" target=\"_blank\" href=\"https://www.kaggle.com/c/siim-acr-pneumothorax-segmentation/overview/resources\">Resources page</a> for more details.</p>\n<h1>Prerequisites</h1>\n<ul>\n<li>A Google Cloud account. If you don\u2019t have an account, <a rel=\"noreferrer nofollow\" aria-label=\"register for one here (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/free/\">register for one here</a>. For new users, the <a rel=\"noreferrer nofollow\" aria-label=\"Google Cloud Products (GCP) free tier (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/free/docs/gcp-free-tier\">Google Cloud Products (GCP) free tier</a> will give you credits to use on GCP for things like storage or using GCP ML tools where there are costs incurred.</li>\n<li>A <a rel=\"noreferrer nofollow\" aria-label=\"Google Cloud project (opens in a new tab)\" target=\"_blank\" href=\"https://console.cloud.google.com/cloud-resource-manager\">Google Cloud project</a>.</li>\n<li>The google email associated with your Google Cloud account must join the <a rel=\"noreferrer nofollow\" aria-label=\"SIIM-Kaggle google group (opens in a new tab)\" target=\"_blank\" href=\"https://groups.google.com/d/forum/siim-kaggle\">SIIM-Kaggle google group</a> to gain permissions to the necessary Healthcare dataset. Note that once you've completed the \"join\" to the group, you will self-join without any further approval. There is no further action to take. It is not a real e-mail group, so you should not see any posts nor should you be able to make any posts. It exists purely to provision access to the competition's datastore.</li>\n<li><a rel=\"noreferrer nofollow\" aria-label=\"Download and install gcloud (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/sdk/install\">Download and install gcloud</a>.</li>\n<li><a rel=\"noreferrer nofollow\" aria-label=\"Download and install gsutil (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/storage/docs/gsutil_install\">Download and install gsutil</a>.</li>\n</ul>\n<h1>About the Cloud Healthcare API</h1>\n<p>The <a rel=\"noreferrer nofollow\" aria-label=\"Cloud Healthcare (CHC) API (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/healthcare/\">Cloud Healthcare (CHC) API</a> is a managed service that can be used to store, retrieve, and query medical formats such as DICOM and FHIR. In the following steps, we will use this API to query and retrieve the DICOM images and the images\u2019 FHIR annotations.</p>\n<h1>Authentication</h1>\n<p>The easiest way to authenticate is to use Application Default Credentials. This will set up all Cloud SDK tooling and API client libraries to use your user credentials. </p>\n<p>In a new shell, run the following command and then follow the instructions:</p>\n<pre class=\"uc-code-block\"><code>gcloud auth application-<span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">login</span>\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<p><strong>Note</strong>: There are various other ways to authenticate to the Cloud Healthcare API. The method you choose depends on many factors, including whether you are running as an end-user or as a service account (useful for running in a GCP VM). The following guides discuss the authentication options:</p>\n<ul>\n<li><a rel=\"noreferrer nofollow\" aria-label=\"Authorizing Cloud SDK tools (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/sdk/docs/authorizing\">Authorizing Cloud SDK tools</a></li>\n<li><a rel=\"noreferrer nofollow\" aria-label=\"Authentication to the Cloud Healthcare API (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/healthcare/docs/how-tos/authentication\">Authentication to the Cloud Healthcare API</a></li>\n</ul>\n<h1>Introduction to DICOMWeb</h1>\n<p>The <a rel=\"noreferrer nofollow\" aria-label=\"DICOMWeb protocol (opens in a new tab)\" target=\"_blank\" href=\"https://www.dicomstandard.org/dicomweb/\">DICOMWeb protocol</a> can be used to interact with the Cloud Healthcare API\u2019s DICOMWeb endpoint. DICOM objects are structured in this form:</p>\n<ol>\n<li>Study 1<ol>\n<li>Series 1A<ol>\n<li>Image/Instance 1A1</li>\n<li>Image/Instance 1A2</li>\n<li>\u2026etc</li></ol></li>\n<li>Series 1B</li></ol></li>\n<li>Study 2</li>\n<li>\u2026.etc</li>\n</ol>\n<p>Think of an instance as a single object, like an image or a report. The series can contain multiple instances (e.g. a CT scan series). The study can contain multiple series (e.g. a series with medical images, and a series with a report). In the dataset we are going to deal with most studies contain a single series, and most series contain a single instance.</p>\n<p>In the \u201cExploring and Downloading DICOM instances\u201d section below, you\u2019ll be presented with 2 methods to retrieve the instances from the competition datasets.</p>\n<p>In the \u201cDownloading the FHIR annotations\u201d section below, you\u2019ll be shown how to retrieve the training set annotations.</p>\n<h1>Exploring and Downloading the DICOM instances</h1>\n<p>The <a rel=\"noreferrer nofollow\" aria-label=\"DICOMWeb protocol (opens in a new tab)\" target=\"_blank\" href=\"https://www.dicomstandard.org/dicomweb/\">DICOMWeb protocol</a> can be used to interact with the Cloud Healthcare API\u2019s DICOMWeb endpoint. For information about the features supported by this endpoint, see the <a rel=\"noreferrer nofollow\" aria-label=\"DICOM conformance statement (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/healthcare/docs/dicom\">DICOM conformance statement</a>.</p>\n<p>There are two DICOM stores, one for hosting training data and one for hosting test data.</p>\n<p><strong>Training</strong></p>\n<pre class=\"uc-code-block\"><code><span class=\"hljs-attr\">PROJECT_ID</span>=kaggle-siim-healthcare\n<span class=\"hljs-attr\">REGION</span>=us-central1\n<span class=\"hljs-attr\">DATASET_ID</span>=siim-pneumothorax\n<span class=\"hljs-attr\">DICOM_STORE_ID</span>=dicom-images-train\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<p><strong>Test</strong></p>\n<pre class=\"uc-code-block\"><code><span class=\"hljs-attr\">PROJECT_ID</span>=kaggle-siim-healthcare\n<span class=\"hljs-attr\">REGION</span>=us-central1\n<span class=\"hljs-attr\">DATASET_ID</span>=siim-pneumothorax\n<span class=\"hljs-attr\">DICOM_STORE_ID</span>=dicom-images-test\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<p>There will be 2 methods presented in this tutorial for retrieving the DICOM images:</p>\n<ol>\n<li><p><strong>Download DICOM Studies, Series, Instances or Frames locally</strong>. This can be achieved using the script provided. Please give it a some time as it is downloading around ~10K images.  </p></li>\n<li><p><strong>Export instances to your GCS bucket</strong>. This is recommended if you want to work with the dataset with some other GCP tooling (i.e. GCE/GCK, Cloud ML Engine, Colaboratory). From the bucket, you can also download from the bucket locally.  Note: You can expect to incur charges for the storage of the dataset to your GCS bucket (and possibly other costs associated with using Cloud tools).</p></li>\n</ol>\n<h2>Method 1: Downloading DICOM Studies, Series, Instances or Frames Locally</h2>\n<p>This method uses a script to download the datastore (hosted on the <code>kaggle-siim-healthcare</code> project) to your local directory.</p>\n<h3>1. Authentication</h3>\n<p>As previously mentioned in the Authentication section please run the following to authenticate your user credentials. </p>\n<pre class=\"uc-code-block\"><code>gcloud auth application-<span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">login</span>\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<h3>2.  Install the necessary Python libraries.</h3>\n<p>For the script below you will need the <a rel=\"noreferrer nofollow\" aria-label=\"retrying library (opens in a new tab)\" target=\"_blank\" href=\"https://pypi.org/project/retrying/\">retrying library</a> and the <a rel=\"noreferrer nofollow\" aria-label=\"google auth library (opens in a new tab)\" target=\"_blank\" href=\"https://pypi.org/project/google-auth/\">google auth library</a>. And, if running on Python 2.7 you will need to install the <a rel=\"noreferrer nofollow\" aria-label=\"futures library (opens in a new tab)\" target=\"_blank\" href=\"https://pypi.org/project/futures/\">futures library</a>. </p>\n<pre class=\"uc-code-block\"><code>pip <span class=\"hljs-keyword\">install</span> retrying\npip <span class=\"hljs-keyword\">install</span> google-auth\n<span class=\"hljs-comment\"># Only if running on Python 2.7</span>\npip <span class=\"hljs-keyword\">install</span> futures\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<h3>3. Run the script below.</h3>\n<p>We've provided a <code>download_images.py</code> script on the <a aria-label=\"Data Page (opens in a new tab)\" target=\"_blank\" href=\"https://www.kaggle.com/c/siim-acr-pneumothorax-segmentation/data\">Data Page</a> that downloads all images in both DICOM stores and saves them in the directory where the script is run. The train set is about 1.5 GB total. The test set is about 180 MB total. If, instead, you\u2019re interested in retrieving specific studies, series, instances, you should review the information under the \u201cOther Cloud Healthcare API Actions\u201d section. You\u2019ll have to then revise the script to retrieve the specific data you are looking for.</p>\n<p>Note: Due to the large number of images, this may take <strong>10-15 minutes</strong>.</p>\n<h2>Method 2: Export DICOM instances to your GCS bucket</h2>\n<p>This method will post the datastore\u2019s DICOM instances (hosted on the <code>kaggle-siim-healthcare</code> project) to a GCS bucket that you name in your GCP project.</p>\n<h3>1. Creating a GCS bucket</h3>\n<p>Google Cloud Storage (GCS) is a storage system used to store and access objects on GCP. The Cloud Healthcare API can export all DICOM instances to a GCS bucket. To do this, we first create a GCS bucket and assign it to a <em>BUCKET</em> variable. For more detailed guidance, see <a rel=\"noreferrer nofollow\" aria-label=\"Creating storage buckets (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/storage/docs/creating-buckets\">Creating storage buckets</a>. <em>MY_PROJECT</em> represents the project name for your GCP project where you\u2019ll be transferring the dataset.</p>\n<pre class=\"uc-code-block\"><code><span class=\"hljs-attribute\">MY_PROJECT</span>=<span class=\"hljs-string\">\"MY_PROJECT\"</span>\n<span class=\"hljs-attribute\">BUCKET</span>=<span class=\"hljs-string\">\"gs://<span class=\"hljs-variable\">${USER}</span>-siim-bucket-dicom/\"</span>\ngsutil mb -p <span class=\"hljs-variable\">${MY_PROJECT}</span> -c regional -l us-central1 -b on <span class=\"hljs-variable\">${BUCKET}</span>\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<h3>2. Granting permissions to export to GCS</h3>\n<p>To grant permissions for the Cloud Healthcare API to write to the new bucket, follow the instructions for <a rel=\"noreferrer nofollow\" aria-label=\"Exporting data to Cloud Storage (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/healthcare/docs/how-tos/controlling-access-other-products#exporting_data_to\">Exporting data to Cloud Storage</a>. </p>\n<p><strong>IMPORTANT</strong>: The roles required should be set for this member: <code>service-38125765871@gcp-sa-healthcare.iam.gserviceaccount.com</code> -- Note that without allowing the Storage Object Admin role for this specific member, you will not be able to download the dataset to a GCS bucket.</p>\n<h3>3. Run export operation to copy DICOM store into GCS bucket</h3>\n<p>To run the export operation and inspect its status, follow the instructions in <a rel=\"noreferrer nofollow\" aria-label=\"Exporting DICOM instances (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/healthcare/docs/how-tos/dicom-import-export#exporting_dicom_instances\">Exporting DICOM instances</a>. You can find a code sample to export the training dataset below. You can use the <em>DIRECTORY</em> variable to control which sub-directory to output the DICOM instances to in the bucket.</p>\n<p>Note: Depending on the notation required by the method you are using to execute the below code, your uriPrefix may need to be adjusted. The goal is to name it to match the format: <code>\u2018gs://YOUR_BUCKET/train\u2019</code>where <em>YOUR_BUCKET</em> is the bucket you created in the prior section.</p>\n<pre class=\"uc-code-block\"><code><span class=\"hljs-attribute\">PROJECT_ID</span>=<span class=\"hljs-string\">\"kaggle-siim-healthcare\"</span>\n<span class=\"hljs-attribute\">REGION</span>=<span class=\"hljs-string\">\"us-central1\"</span>\n<span class=\"hljs-attribute\">DATASET_ID</span>=<span class=\"hljs-string\">\"siim-pneumothorax\"</span>\n<span class=\"hljs-attribute\">DICOM_STORE_ID</span>=<span class=\"hljs-string\">\"dicom-images-train\"</span>\n<span class=\"hljs-attribute\">DIRECTORY</span>=<span class=\"hljs-string\">\"train-3\"</span>\ncurl -X POST \\\n-H <span class=\"hljs-string\">\"Authorization: Bearer \"</span>$(gcloud auth print-access-token) \\\n-H <span class=\"hljs-string\">\"Content-Type: application/json; charset=utf-8\"</span> \\\n--data <span class=\"hljs-string\">\"{\n  'gcsDestination': {\n    'uriPrefix': '\"</span><span class=\"hljs-variable\">${BUCKET}</span><span class=\"hljs-variable\">${DIRECTORY}</span><span class=\"hljs-string\">\"'\n  }\n}\"</span> <span class=\"hljs-string\">\"https://healthcare.googleapis.com/v1beta1/projects/<span class=\"hljs-variable\">${PROJECT_ID}</span>/locations/<span class=\"hljs-variable\">${REGION}</span>/datasets/<span class=\"hljs-variable\">${DATASET_ID}</span>/dicomStores/<span class=\"hljs-variable\">${DICOM_STORE_ID}</span>:export\"</span>\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<p>Similarly, run the following command to retrieve the DICOM test set.</p>\n<pre class=\"uc-code-block\"><code><span class=\"hljs-attribute\">DIRECTORY_TEST</span>=\u201dtest\u201d\n<span class=\"hljs-attribute\">DICOM_STORE_ID_TEST</span>=<span class=\"hljs-string\">\"dicom-images-test\"</span>\ncurl -X POST \\\n-H <span class=\"hljs-string\">\"Authorization: Bearer \"</span>$(gcloud auth print-access-token) \\\n-H <span class=\"hljs-string\">\"Content-Type: application/json; charset=utf-8\"</span> \\\n--data <span class=\"hljs-string\">\"{\n  'gcsDestination': {\n    'uriPrefix': '\"</span><span class=\"hljs-variable\">${BUCKET}</span><span class=\"hljs-variable\">${DIRECTORY_TEST}</span><span class=\"hljs-string\">\"'\n  }\n}\"</span> <span class=\"hljs-string\">\"https://healthcare.googleapis.com/v1beta1/projects/<span class=\"hljs-variable\">${PROJECT_ID}</span>/locations/<span class=\"hljs-variable\">${REGION}</span>/datasets/<span class=\"hljs-variable\">${DATASET_ID}</span>/dicomStores/<span class=\"hljs-variable\">${DICOM_STORE_ID_TEST}</span>:export\"</span>\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<h3>4. Check operation status</h3>\n<p>Check status of the long-running operation by replacing <em>OPERATION_ID</em> with the operation ID that is returned in the JSON response to the prior request.</p>\n<pre class=\"uc-code-block\"><code><span class=\"hljs-built_in\">curl</span> <span class=\"hljs-literal\">-X</span> GET \\\n<span class=\"hljs-literal\">-H</span> <span class=\"hljs-string\">\"Authorization: Bearer \"</span><span class=\"hljs-variable\">$</span>(gcloud auth print<span class=\"hljs-literal\">-access-token</span>) \\   <span class=\"hljs-string\">\"https://healthcare.googleapis.com/v1beta1/projects/<span class=\"hljs-variable\">$</span>{PROJECT_ID}/locations/<span class=\"hljs-variable\">$</span>{REGION}/datasets/<span class=\"hljs-variable\">$</span>{DATASET_ID}/operations/OPERATION_ID\"</span>\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<p>To list the contents of the output bucket, run the following command.</p>\n<pre class=\"uc-code-block\"><code>gsutil <span class=\"hljs-built_in\">ls</span> <span class=\"hljs-variable\">${BUCKET}</span><span class=\"hljs-variable\">${DIRECTORY}</span>/**\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<h3>5. Copy GCS bucket to local file system</h3>\n<p>To copy the GCS bucket to your local file system, run the following command:</p>\n<pre class=\"uc-code-block\"><code><span class=\"hljs-built_in\">mkdir</span> /tmp/siim-dicom\ngsutil -m <span class=\"hljs-built_in\">cp</span> -R <span class=\"hljs-variable\">${BUCKET}</span><span class=\"hljs-variable\">${DIRECTORY}</span> /tmp/siim-dicom/\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<h1>Downloading the FHIR annotations</h1>\n<p>The annotations for this dataset are stored as FHIR resources (specifically as a <a rel=\"noreferrer nofollow\" aria-label=\"DocumentReference (opens in a new tab)\" target=\"_blank\" href=\"https://www.hl7.org/fhir/documentreference.html\">DocumentReference</a> resource). The Cloud Healthcare API can be used to query and download these FHIR resources.  The features supported by this endpoint can be found in the <a rel=\"noreferrer nofollow\" aria-label=\"FHIR conformance statement (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/healthcare/docs/fhirhttps://cloud.google.com/healthcare/docs/dicom\">FHIR conformance statement</a>.</p>\n<p>There is one FHIR store containing the training annotations:</p>\n<pre class=\"uc-code-block\"><code><span class=\"hljs-attr\">PROJECT_ID</span>=kaggle-siim-healthcare\n<span class=\"hljs-attr\">REGION</span>=us-central1\n<span class=\"hljs-attr\">DATASET_ID</span>=siim-pneumothorax\n<span class=\"hljs-attr\">FHIR_STORE_ID</span>=fhir-masks-train\n<span class=\"hljs-attr\">DOCUMENT_REFERENCE_ID</span>=d70d8f3e-<span class=\"hljs-number\">990</span>a-<span class=\"hljs-number\">4</span>bc0-b11f-c87349f5d4eb\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<p>The <a rel=\"noreferrer nofollow\" aria-label=\"DocumentReference (opens in a new tab)\" target=\"_blank\" href=\"https://www.hl7.org/fhir/documentreference.html\">DocumentReference</a> resources contain a URL to the CSV file hosted on siim.org that contains the annotated masks.</p>\n<p>The following code sample will access the FHIR datastore for the <strong>training</strong> dataset. See <a rel=\"noreferrer nofollow\" aria-label=\"Getting a FHIR resource (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/healthcare/docs/how-tos/fhir-resources#getting_a_fhir_resource\">Getting a FHIR resource</a> for samples in other languages. <strong>Note that the response from the below code will point to a URL for the .CSV that contains the annotated masks for each ImageId.</strong></p>\n<pre class=\"uc-code-block\"><code><span class=\"hljs-attribute\">PROJECT_ID</span>=<span class=\"hljs-string\">\"kaggle-siim-healthcare\"</span>\n<span class=\"hljs-attribute\">REGION</span>=<span class=\"hljs-string\">\"us-central1\"</span>\n<span class=\"hljs-attribute\">DATASET_ID</span>=<span class=\"hljs-string\">\"siim-pneumothorax\"</span>\n<span class=\"hljs-attribute\">FHIR_STORE_ID</span>=<span class=\"hljs-string\">\"fhir-masks-train\"</span>\n<span class=\"hljs-attribute\">DOCUMENT_REFERENCE_ID</span>=<span class=\"hljs-string\">\"d70d8f3e-990a-4bc0-b11f-c87349f5d4eb\"</span>\n\ncurl -X <span class=\"hljs-built_in\">GET</span> \\\n-H <span class=\"hljs-string\">\"Authorization: Bearer \"</span>$(gcloud auth print-access-token) \\\n<span class=\"hljs-string\">\"https://healthcare.googleapis.com/v1beta1/projects/<span class=\"hljs-variable\">${PROJECT_ID}</span>/locations/<span class=\"hljs-variable\">${REGION}</span>/datasets/<span class=\"hljs-variable\">${DATASET_ID}</span>/fhirStores/<span class=\"hljs-variable\">${FHIR_STORE_ID}</span>/fhir/DocumentReference/<span class=\"hljs-variable\">${DOCUMENT_REFERENCE_ID}</span>\"</span>\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<h1>Other Cloud Healthcare API Actions</h1>\n<h2>Searching for DICOM Instances</h2>\n<p>The <a rel=\"noreferrer nofollow\" aria-label=\"SearchTransaction (opens in a new tab)\" target=\"_blank\" href=\"http://dicom.nema.org/medical/dicom/current/output/html/part18.html#sect_10.6\">SearchTransaction</a> protocol can be used to search for studies, series, or instances in a dicomStore. The following code sample searches for all instances below on the training dataset. </p>\n<p>See <a rel=\"noreferrer nofollow\" aria-label=\"Searching for studies, series, instances, and frames (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/healthcare/docs/how-tos/dicomweb#searching_for_studies_series_instances_and_frames\">Searching for studies, series, instances, and frames</a> for additional examples. See <a rel=\"noreferrer nofollow\" aria-label=\"the supported search modes and the supported DICOM tags (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/healthcare/docs/dicom#search_transaction\">the supported search modes and the supported DICOM tags</a>.</p>\n<pre class=\"uc-code-block\"><code><span class=\"hljs-built_in\">curl</span> <span class=\"hljs-literal\">-X</span> GET \\\n<span class=\"hljs-literal\">-H</span> <span class=\"hljs-string\">\"Authorization: Bearer \"</span><span class=\"hljs-variable\">$</span>(gcloud auth print<span class=\"hljs-literal\">-access-token</span>) \\\n<span class=\"hljs-string\">\"https://healthcare.googleapis.com/v1beta1/projects/<span class=\"hljs-variable\">$</span>{PROJECT_ID}/locations/<span class=\"hljs-variable\">$</span>{REGION}/datasets/<span class=\"hljs-variable\">$</span>{DATASET_ID}/dicomStores/<span class=\"hljs-variable\">$</span>{DICOM_STORE_ID}/dicomWeb/instances\"</span>\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<h2>Fetching a specific study, series, instance or frame</h2>\n<p>If you'd like to fetch specific study, series, instance or frame to your local machine, you can use the <a rel=\"noreferrer nofollow\" aria-label=\"RetrieveTransaction (opens in a new tab)\" target=\"_blank\" href=\"http://dicom.nema.org/medical/dicom/current/output/html/part18.html#sect_10.4\">RetrieveTransaction</a> protocol. You can find sample call below to retrieve an individual instance. For this example, a known Study UID  from the training dataset has been declared. See <a rel=\"noreferrer nofollow\" aria-label=\"Retrieving a study, series, instance, or frame (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/healthcare/docs/how-tos/dicomweb#retrieving_a_study_series_instance_or_frame\">Retrieving a study, series, instance, or frame</a> for samples in other languages. </p>\n<pre class=\"uc-code-block\"><code><span class=\"hljs-attribute\">STUDY_UID</span>=<span class=\"hljs-string\">\"1.2.276.0.7230010.3.1.2.8323329.12562.1517875239.738011\"</span>\n\ncurl -X <span class=\"hljs-built_in\">GET</span> \\\n-H <span class=\"hljs-string\">\"Authorization: Bearer \"</span>$(gcloud auth print-access-token) \\\n<span class=\"hljs-string\">\"https://healthcare.googleapis.com/v1beta1/projects/<span class=\"hljs-variable\">${PROJECT_ID}</span>/locations/<span class=\"hljs-variable\">${REGION}</span>/datasets/<span class=\"hljs-variable\">${DATASET_ID}</span>/dicomStores/<span class=\"hljs-variable\">${DICOM_STORE_ID}</span>/dicomWeb/studies/<span class=\"hljs-variable\">${STUDY_UID}</span>\"</span>\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<p>The response of this call is <a rel=\"noreferrer nofollow\" aria-label=\"MIME Multipart (opens in a new tab)\" target=\"_blank\" href=\"https://www.w3.org/Protocols/rfc1341/7_2_Multipart.html\">MIME Multipart</a>. We can decode the MIME Multipart message and retrieve the individual instances using common libraries, such as <a rel=\"noreferrer nofollow\" aria-label=\"https://github.com/requests/toolbelt (opens in a new tab)\" target=\"_blank\" href=\"https://github.com/requests/toolbelt\">https://github.com/requests/toolbelt</a> (you will need to install this).</p>\n<h2>Exporting DICOM metadata to BigQuery</h2>\n<p>You can export the metadata of all DICOMs in a DICOM store to BigQuery. This might be useful if you\u2019d like to do some quick analytics on the metadata. For more information, please see <a rel=\"noreferrer nofollow\" aria-label=\"https://cloud.google.com/healthcare/docs/how-tos/dicom-export-bigquery (opens in a new tab)\" target=\"_blank\" href=\"https://cloud.google.com/healthcare/docs/how-tos/dicom-export-bigquery\">https://cloud.google.com/healthcare/docs/how-tos/dicom-export-bigquery</a>.</p>", "Citation": "Anna Zawacki, Carol Wu, George Shih, Julia Elliott, Mikhail Fomitchev, Mohannad Hussain, ParasLakhani, Phil Culliton, and Shunxing Bao. SIIM-ACR Pneumothorax Segmentation. https://kaggle.com/competitions/siim-acr-pneumothorax-segmentation, 2019. Kaggle.", "Data Description": "<blockquote>\n  <p>UPDATE: This dataset is no longer available via the Cloud Healthcare API. <a aria-label=\"Others have shared the dataset on Kaggle (opens in a new tab)\" target=\"_blank\" href=\"https://www.kaggle.com/seesee/siim-train-test\">Others have shared the dataset on Kaggle</a>, if you're interested in accessing it through those methods.</p>\n</blockquote>\n<p><strong>Stage 2 Note: the stage 1 files (if needed) should be downloaded using the special downloading instructions. The stage 2 files must be downloaded directly from Kaggle. See below.</strong></p>\n<p><strong>Note: this is a two-stage competition with special downloading instructions. Please read carefully and ask any questions you might have!</strong></p>\n<h2>What files do I need?</h2>\n<p>The stage 2 training set consists of the stage 1 training set and the stage 1 test set combined. If you need to download their images, please follow these instructions for both <strong>train</strong> AND <strong>test</strong>, using <a aria-label=\"this tutorial page (opens in a new tab)\" target=\"_blank\" href=\"https://www.kaggle.com/c/siim-acr-pneumothorax-segmentation/overview/siim-cloud-healthcare-api-tutorial\">this tutorial page</a> or in <a rel=\"noreferrer nofollow\" aria-label=\".pdf format here (opens in a new tab)\" target=\"_blank\" href=\"https://storage.googleapis.com/kaggle-media/competitions/siim/SIIM%20Cloud%20Healthcare%20API%20Documentation.pdf\">.pdf format here</a>.</p>\n<p>The annotations for the stage 2 training set should be downloaded below - the filename is <strong>stage_2_train.csv</strong>.  The stage 2 test images can be downloaded directly from this page - contained in <strong>stage_2_images.zip</strong>.</p>\n<p>You may also need the sample submission (which contains all of the test IDs for stage 2) to aid you in making predictions.</p>\n<h2>What should I expect the data format to be?</h2>\n<p>The data is comprised of images in DICOM format and annotations in the form of image IDs and run-length-encoded (RLE) masks. Some of the images contain instances of pneumothorax (collapsed lung), which are indicated by encoded binary masks in the annotations.  <strong>Some training images have multiple annotations.</strong></p>\n<pre class=\"uc-code-block\"><code><span class=\"hljs-attribute\">1</span>.<span class=\"hljs-number\">2.276.0.723</span>0<span class=\"hljs-number\">010.3.1.4</span>.<span class=\"hljs-number\">8323329</span>.<span class=\"hljs-number\">14508</span>.<span class=\"hljs-number\">1517875252</span>.<span class=\"hljs-number\">443873</span>,<span class=\"hljs-number\">387620</span> <span class=\"hljs-number\">23</span> <span class=\"hljs-number\">996</span> <span class=\"hljs-number\">33</span> <span class=\"hljs-number\">986</span> <span class=\"hljs-number\">43</span> <span class=\"hljs-number\">977</span> <span class=\"hljs-number\">51</span> <span class=\"hljs-number\">968</span> <span class=\"hljs-number\">58</span> <span class=\"hljs-number\">962</span> <span class=\"hljs-number\">65</span> <span class=\"hljs-number\">956</span> <span class=\"hljs-number\">70</span> <span class=\"hljs-number\">952</span> <span class=\"hljs-number\">74</span> <span class=\"hljs-number\">949</span> <span class=\"hljs-number\">76</span> <span class=\"hljs-number\">946</span> <span class=\"hljs-number\">79</span>\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<p>Images without pneumothorax have a mask value of -1.</p>\n<pre class=\"uc-code-block\"><code><span class=\"hljs-attribute\">1</span>.<span class=\"hljs-number\">2.276.0.723</span>0<span class=\"hljs-number\">010.3.1.4</span>.<span class=\"hljs-number\">8323329</span>.<span class=\"hljs-number\">1034</span>.<span class=\"hljs-number\">1517875166</span>.<span class=\"hljs-number\">8504</span>,-<span class=\"hljs-number\">1</span>\n</code><div class=\"uc-code-block-copy-button-wrapper\"><button class=\"uc-code-block-copy-button google-symbols\" aria-label=\"Copy code\">content_copy</button></div></pre>\n<h2>What am I predicting?</h2>\n<p>We are attempting to a) predict the existence of pneumothorax in our test images and b) indicate the location and extent of the condition using masks. Your model should create binary masks and encode them using RLE.  Note that we are using a <em>relative</em> form of RLE (meaning that pixel locations are measured from the end of the previous run) as indicated below:</p>\n<blockquote>\n  <p>1.2.276.0.7230010.3.1.4.8323329.14508.1517875252.443873,387620 23 <strong>996</strong> 33 <strong>986</strong> 43 <strong>977</strong> 51 <strong>968</strong> 58 <strong>962</strong> 65 <strong>956</strong> 70 <strong>952</strong> 74 <strong>949</strong> 76 <strong>946</strong> 79</p>\n</blockquote>\n<p>Sample code is available for download that may help with encoding and decoding this form of RLE.<br>\n<strong>Each test image may only have one mask submitted for it. It should combine all predicted masks for that image.</strong></p>"}